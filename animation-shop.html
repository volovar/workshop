<!DOCTYPE html>
<html>
    <head>
        <title>Blank</title>

        <link rel="stylesheet" type="text/css" href="./css/style.css">
        <style>
            p {
                margin: 0;
            }

            .block-container {
                display: -webkit-flex;
                display: flex;
                flex-wrap: wrap;
                overflow: hidden;
                width: 300px;  
            }

            .block {
                background: #999;
                transition: all 180ms ease;
                white-space: nowrap;
                width: 100%;
            }

            .block:last-child {
                background: #666;
                color: #f1f1f1;  
            }

            .translate-container {
                overflow: hidden;
                width: 300px;
            }

            .translate-block {
                display: -webkit-flex;
                display: flex;
                transition: all 180ms ease;
                width: 200%;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <div class="block-container">
                <div class="js-block-a block">
                    <p>Width Block A</p>
                </div>

                <div class="js-block-b block" style="width: 0%;">
                    <p>Width Block B</p>
                </div>    
            </div>
            
            <div>
                <button class="js-block-button">Toggle Width Animation</button>
            </div>
        </div>

        <div class="container">
            <div class="translate-container">
                <div class="js-translate-block translate-container translate-block">
                    <div class="js-translate-a block">
                        <p>Translate Block A</p>
                    </div>

                    <div class="js-translate-b block">
                        <p>Translate Block B</p>
                    </div>   
                </div> 
            </div>
            
            <div>
                <button class="js-translate-button">Toggle Translate Animation</button>
            </div>
        </div>

        <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script>
            var $blockA = $('.js-block-a'),
                $blockB = $('.js-block-b'),
                $blockButton = $('.js-block-button'),
                $translateA = $('.js-translate-a'),
                $translateB = $('.js-translate-b'),
                $translateBlock = $('.js-translate-block'),
                $translateButton = $('.js-translate-button'),
                toggleState = 'first',
                translateState = 'first';

            $blockButton.on('click', function (e) {
                toggleState = toggleAnimation ($blockA, $blockB, toggleState, 'width', '100%');
            });

            $translateButton.on('click', function (e) {
                translateState = toggleAnimation ($translateBlock, '', translateState, 'translate', '50%');
            });

            function toggleAnimation (elementA, elementB, state, type, value) {
                var newState;

                elementA.stop();

                if (elementB) {
                    elementB.stop();
                }

                if (type === 'translate') {
                    newState = translateElements (elementA, state, value);
                } else if (type === 'width') {
                    newState = changeWidth (elementA, elementB, state, value);
                }

                return newState;
            }

            function translateElements (element, state, value) {
                if (state === 'first') {
                    element.css({'transform': 'translate(-'+ value +')'});
                    state = 'second'
                } else if (state === 'second') {
                    element.css({'transform': 'translate(0%)'});
                    state = 'first'
                }

                return state;
            }

            function changeWidth (elementA, elementB, state, value) {
                if (state === 'first') {
                    elementA.css({'width': '0%'});
                    elementB.css({'width': value});
                    state = 'second'
                } else if (state === 'second') {
                    elementA.css({'width': value});
                    elementB.css({'width': '0%'});
                    state = 'first'
                }

                return state;
            }
        </script>
    </body>
</html>