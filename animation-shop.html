<!DOCTYPE html>
<html>
    <head>
        <title>Blank</title>

        <link rel="stylesheet" type="text/css" href="./css/style.css">
        <style>
            p {
                margin: 0;
            }

            .block-container {
                display: -webkit-flex;
                display: flex;
                flex-wrap: wrap;
                overflow: hidden;
                width: 300px;  
            }

            .block {
                background: #999;
                text-shadow: 0 1px 8px rgba(0,0,0,0.4);
                transition: all 180ms ease;
                white-space: nowrap;
                width: 100%;
            }

            .block:last-child {
                background: #666;
                color: #f1f1f1;  
            }

            .horizontal-container {
                overflow: hidden;
                width: 300px;
            }

            .horizontal-block {
                display: -webkit-flex;
                display: flex;
                transition: all 180ms ease;
                width: 200%;
            }

            .vertical-container {
                overflow: hidden;
                height: 300px;
                width: 300px;
            }

            .vertical-block {
                display: -webkit-flex;
                display: flex;
                flex-wrap: wrap;
                height: 200%;
                transition: all 180ms ease;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <div class="block-container">
                <div class="js-block-a block">
                    <p>Width Block A</p>
                </div>

                <div class="js-block-b block" style="width: 0%;">
                    <p>Width Block B</p>
                </div>    
            </div>
            
            <div>
                <button class="js-block-button">Toggle Width Animation</button>
            </div>
        </div>

        <div class="container">
            <div class="horizontal-container">
                <div class="js-horizontal-block horizontal-container horizontal-block">
                    <div class="js-horizontal-a block">
                        <p>Translate Block A</p>
                    </div>

                    <div class="js-horizontal-b block">
                        <p>Translate Block B</p>
                    </div>   
                </div> 
            </div>
            
            <div>
                <button class="js-horizontal-button">Toggle Translate Animation</button>
            </div>
        </div>

        <div class="container">
            <div class="vertical-container">
                <div class="js-vertical-block vertical-container vertical-block">
                    <div class="js-vertical-a block" style="color: #fff; background: url('http://placekitten.com/452/450?image=4') no-repeat 50% 50%; background-size: 100%;">
                        <p>Translate Block A</p>
                    </div>

                    <div class="js-vertical-b block" style="background: url('http://placekitten.com/452/450?image=1') no-repeat 50% 50%; background-size: 100%;">
                        <p>Translate Block B</p>
                    </div>   
                </div> 
            </div>
            
            <div>
                <button class="js-vertical-button">Toggle Translate Animation</button>
            </div>
        </div>

        <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script>
            var $blockA = $('.js-block-a'),
                $blockB = $('.js-block-b'),
                $blockButton = $('.js-block-button'),
                $horizontalBlock = $('.js-horizontal-block'),
                $horizontalButton = $('.js-horizontal-button'),
                $verticalBlock = $('.js-vertical-block'),
                $verticalButton = $('.js-vertical-button'),
                $verticalA = $('.js-vertical-a'),
                $verticalB = $('.js-vertical-b'),
                toggleState = 'first',
                horizontalState = 'first',
                verticalState = 'first';

            $blockButton.on('click', function (e) {
                toggleState = toggleAnimation ($blockA, $blockB, toggleState, 'width', '100%');
            });

            $horizontalButton.on('click', function (e) {
                horizontalState = toggleAnimation ($horizontalBlock, '', horizontalState, 'translate', '50%', 'X');
            });

            $verticalButton.on('click', function (e) {
                verticalState = toggleAnimation ($verticalBlock, '', verticalState, 'vertical-shift', '50%', 'Y', true);
            });

            function toggleAnimation (elementA, elementB, state, type, value, axis, fade) {
                var newState;

                elementA.stop();

                if (elementB) {
                    elementB.stop();
                }

                if (type === 'translate') {
                    newState = shiftElements (elementA, state, value, axis);
                } else if (type === 'width') {
                    newState = changeWidth (elementA, elementB, state, value, axis);
                } else if (type === 'vertical-shift') {
                    newState = shiftElements (elementA, state, value, axis, fade);
                }

                return newState;
            }

            function shiftElements (element, state, value, axis, fade) {
                if (state === 'first') {
                    element.css({'transform': 'translate' + axis + '(-'+ value +')'});

                    state = 'second'
                } else if (state === 'second') {
                    element.css({'transform': 'translate' + axis + '(0%)'});

                    state = 'first'
                }

                return state;
            }

            function changeWidth (elementA, elementB, state, value) {
                if (state === 'first') {
                    elementA.css({'width': '0%'});
                    elementB.css({'width': value});
                    state = 'second'
                } else if (state === 'second') {
                    elementA.css({'width': value});
                    elementB.css({'width': '0%'});
                    state = 'first'
                }

                return state;
            }
        </script>
    </body>
</html>